module {
  pdl.pattern @mlp : benefit(1) {
    %0 = operand loc(#loc2)
    %1 = operand loc(#loc3)
    %2 = operand loc(#loc4)
    %3 = operands loc(#loc5)
    %4 = types loc(#loc6)
    %5 = operation "linalg.matmul"(%0, %1, %2, %3 : !pdl.value, !pdl.value, !pdl.value, !pdl.range<value>)  -> (%4 : !pdl.range<type>) loc(#loc6)
    rewrite %5 {
      %6 = attribute = 0 : i32 loc(#loc8)
      %7 = operation "arith.constant"  {"value" = %6} loc(#loc9)
      %8 = attribute = 1 : i32 loc(#loc10)
      %9 = operation "arith.constant"  {"value" = %8} loc(#loc11)
      %10 = result 0 of %7 loc(#loc12)
      %11 = operation "tensor.dim"(%0, %10 : !pdl.value, !pdl.value)  loc(#loc13)
      %12 = result 0 of %9 loc(#loc14)
      %13 = operation "tensor.dim"(%1, %12 : !pdl.value, !pdl.value)  loc(#loc15)
      %14 = result 0 of %9 loc(#loc16)
      %15 = operation "tensor.dim"(%0, %14 : !pdl.value, !pdl.value)  loc(#loc17)
      %16 = results of %11  loc(#loc18)
      %17 = operation "arith.index_cast"(%16 : !pdl.range<value>)  loc(#loc19)
      %18 = results of %13  loc(#loc20)
      %19 = operation "arith.index_cast"(%18 : !pdl.range<value>)  loc(#loc21)
      %20 = results of %15  loc(#loc22)
      %21 = operation "arith.index_cast"(%20 : !pdl.range<value>)  loc(#loc23)
      %22 = attribute = false loc(#loc24)
      %23 = operation "arith.constant"  {"value" = %22} loc(#loc25)
      %24 = result 0 of %5 loc(#loc26)
      %25 = results of %11  loc(#loc27)
      %26 = results of %13  loc(#loc28)
      %27 = results of %15  loc(#loc29)
      %28 = results of %11  loc(#loc30)
      %29 = apply_native_rewrite "rewriteAsFlowDispatch"(%5, %25, %26, %27, %28 : !pdl.operation, !pdl.range<value>, !pdl.range<value>, !pdl.range<value>, !pdl.range<value>) : !pdl.operation loc(#loc31)
    } loc(#loc7)
  } loc(#loc1)
} loc(#loc)
#loc = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":1:1)
#loc1 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":11:1)
#loc2 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":12:33)
#loc3 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":12:46)
#loc4 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":12:59)
#loc5 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":12:73)
#loc6 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":12:14)
#loc7 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":14:3)
#loc8 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":15:50)
#loc9 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":15:21)
#loc10 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":16:49)
#loc11 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":16:20)
#loc12 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":17:33)
#loc13 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":17:13)
#loc14 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":18:33)
#loc15 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":18:13)
#loc16 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":19:33)
#loc17 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":19:13)
#loc18 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":20:39)
#loc19 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":20:18)
#loc20 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":21:39)
#loc21 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":21:18)
#loc22 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":22:39)
#loc23 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":22:18)
#loc24 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":26:47)
#loc25 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":26:18)
#loc26 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":28:22)
#loc27 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":29:33)
#loc28 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":29:36)
#loc29 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":29:39)
#loc30 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":29:42)
#loc31 = loc("/home/ianwood/iree/samples/custom_dispatch/cpu/mlp_plugin/mlp_linalg_spec.pdll":29:5)
