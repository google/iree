iree_mlir_benchmark_suite(
  MODULE_NAMES
    "MobileNetV2"
    "MobileNetV3Small"
  MODULE_TAGS
    "fp32,imagenet"
    "fp32,imagenet"
  MODULE_SOURCES
    "TensorFlow"
    "TensorFlow"
  MLIR_SOURCES
    "https://storage.googleapis.com/iree-model-artifacts/MobileNetV2-b0c5c584.tar.gz"
    "https://storage.googleapis.com/iree-model-artifacts/MobileNetV3Small-b0c5c584.tar.gz"
  ENTRY_FUNCTIONS
    "call"
    "call"
  FUNCTION_INPUTS
    "1x224x224x3xf32"
    "1x224x224x3xf32"
  BENCHMARK_MODE
    "1-thread,big-core,full-inference"
  TARGET_BACKEND
    "dylib-llvm-aot"
  TARGET_ARCHITECTURE
    "CPU-ARM64-v8A"
  TRANSLATION_FLAGS
    "--iree-llvm-target-triple=aarch64-none-linux-android29"
    "--iree-flow-inline-constants-max-byte-length=2048"
    "--iree-flow-dispatch-formation-enable-operand-fusion"
    "-iree-llvm-loop-unrolling=true"
  DRIVER
    "dylib-sync"
)

iree_mlir_benchmark_suite(
  MODULE_NAMES
    "MobileNetV2"
    "MobileNetV3Small"
  MODULE_TAGS
    "fp32,imagenet"
    "fp32,imagenet"
  MODULE_SOURCES
    "TensorFlow"
    "TensorFlow"
  MLIR_SOURCES
    "https://storage.googleapis.com/iree-model-artifacts/MobileNetV2-b0c5c584.tar.gz"
    "https://storage.googleapis.com/iree-model-artifacts/MobileNetV3Small-b0c5c584.tar.gz"
  ENTRY_FUNCTIONS
    "call"
    "call"
  FUNCTION_INPUTS
    "1x224x224x3xf32"
    "1x224x224x3xf32"
  BENCHMARK_MODE
    "3-thread,big-core,full-inference"
  TARGET_BACKEND
    "dylib-llvm-aot"
  TARGET_ARCHITECTURE
    "CPU-ARM64-v8A"
  TRANSLATION_FLAGS
    "--iree-llvm-target-triple=aarch64-none-linux-android29"
    "--iree-flow-inline-constants-max-byte-length=2048"
    "--iree-flow-dispatch-formation-enable-operand-fusion"
    "-iree-llvm-loop-unrolling=true"
  DRIVER
    "dylib"
  RUNTIME_FLAGS
    "--task_topology_group_count=3"
)

iree_mlir_benchmark_suite(
  MODULE_NAMES
    "MobileNetV2"
    "MobileNetV3Small"
  MODULE_TAGS
    "fp32,imagenet"
    "fp32,imagenet"
  MODULE_SOURCES
    "TensorFlow"
    "TensorFlow"
  MLIR_SOURCES
    "https://storage.googleapis.com/iree-model-artifacts/MobileNetV2-b0c5c584.tar.gz"
    "https://storage.googleapis.com/iree-model-artifacts/MobileNetV3Small-b0c5c584.tar.gz"
  ENTRY_FUNCTIONS
    "call"
    "call"
  FUNCTION_INPUTS
    "1x224x224x3xf32"
    "1x224x224x3xf32"
  BENCHMARK_MODE
    "full-inference"
  TARGET_BACKEND
    "vulkan-spirv"
  TARGET_ARCHITECTURE
    "GPU-Adreno"
  TRANSLATION_FLAGS
    "--iree-vulkan-target-triple=adreno-unknown-android11"
    "--iree-flow-inline-constants-max-byte-length=2048"
    "--iree-flow-dispatch-formation-enable-operand-fusion"
    "--iree-enable-fusion-with-reduction-ops"
  DRIVER
    "vulkan"
)

iree_mlir_benchmark_suite(
  MODULE_NAMES
    "MobileNetV2"
    "MobileNetV3Small"
  MODULE_TAGS
    "fp32,imagenet"
    "fp32,imagenet"
  MODULE_SOURCES
    "TensorFlow"
    "TensorFlow"
  MLIR_SOURCES
    "https://storage.googleapis.com/iree-model-artifacts/MobileNetV2-b0c5c584.tar.gz"
    "https://storage.googleapis.com/iree-model-artifacts/MobileNetV3Small-b0c5c584.tar.gz"
  ENTRY_FUNCTIONS
    "call"
    "call"
  FUNCTION_INPUTS
    "1x224x224x3xf32"
    "1x224x224x3xf32"
  BENCHMARK_MODE
    "full-inference"
  TARGET_BACKEND
    "vulkan-spirv"
  TARGET_ARCHITECTURE
    "GPU-Mali-Valhall"
  TRANSLATION_FLAGS
    "--iree-vulkan-target-triple=valhall-unknown-android11"
    "--iree-flow-inline-constants-max-byte-length=16"
    "--iree-flow-dispatch-formation-enable-operand-fusion"
    "--iree-enable-fusion-with-reduction-ops"
  DRIVER
    "vulkan"
)

iree_mlir_benchmark_suite(
  MODULE_NAMES
    "MobileNetV2"
    "MobileNetV3Small"
  MODULE_TAGS
    "fp32,imagenet"
    "fp32,imagenet"
  MODULE_SOURCES
    "TensorFlow"
    "TensorFlow"
  MLIR_SOURCES
    "https://storage.googleapis.com/iree-model-artifacts/MobileNetV2-b0c5c584.tar.gz"
    "https://storage.googleapis.com/iree-model-artifacts/MobileNetV3Small-b0c5c584.tar.gz"
  ENTRY_FUNCTIONS
    "call"
    "call"
  FUNCTION_INPUTS
    "1x224x224x3xf32"
    "1x224x224x3xf32"
  BENCHMARK_MODE
    "kernel-execution"
  TARGET_BACKEND
    "vulkan-spirv"
  TARGET_ARCHITECTURE
    "GPU-Mali-Valhall"
  TRANSLATION_FLAGS
    "--iree-vulkan-target-triple=valhall-unknown-android11"
    "--iree-flow-inline-constants-max-byte-length=16"
    "--iree-flow-dispatch-formation-enable-operand-fusion"
    "--iree-enable-fusion-with-reduction-ops"
    "--iree-hal-benchmark-dispatch-repeat-count=32"
  DRIVER
    "vulkan"
  RUNTIME_FLAGS
    "--batch_size=32"
)
